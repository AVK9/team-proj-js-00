{"version":3,"file":"gallery-pixabay-f6cf659f.js","sources":["../../src/js/gallery-pixabay.js"],"sourcesContent":["const refs = {\n    form: document.querySelector('#search-form'),\n    dataInput: document.querySelector('.search-input'),\n    gallery: document.querySelector('.gallery'),\n    loadmoreBtn: document.querySelector('.load-more'),\n    messageFinish: document.querySelector('.message-finish'),\n    guard: document.querySelector('.js-guard'),\n}\n\n\nconst { searchQuery } = refs.form.elements;\nlet inputDataUser;\nconst perPage = 40;\nlet page = 1\n\nrefs.form.addEventListener('submit', onSearchQuery)\n function onSearchQuery(e) {\n  e.preventDefault();\n  refs.gallery.innerHTML = '';\n  refs.messageFinish.classList.add('hidden')\n  refs.loadmoreBtn.classList.add('hidden');\n  inputDataUser = searchQuery.value.trim();\n\n  if (!inputDataUser) {\n    return console.log('Pleasure Input Search images...');\n    // return Notiflix.Notify.failure(`Pleasure Input Search images...`);\n  };\n  pixabay(inputDataUser, page)\n  .then((data) => {\n    console.log(data.hits);\n      creatMarkup(data.hits);\n      refs.guard.classList.remove('hidden')\n  })\n        .catch((err) => console.log(err));\n};\n//////////////////////////////////////////////////////////////\nasync function pixabay(inputDataUser, page) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const params = new URLSearchParams({\n        key: \"40254095-fb7e3bf791467f50a6328bb1e\",\n        q: inputDataUser,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        per_page: 10,\n        page,\n    });\n    return await fetch(`${BASE_URL}?${params}`)\n       .then((resp) => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n    return resp.json();\n  });\n}\n//////////////////////////////////////////////////////////////\nfunction creatMarkup(respArr) {\n   const markupGel = respArr.map((\n      {\n         webformatURL,\n         largeImageURL,\n         tags,\n         likes,\n         views,\n         comments,\n         downloads,\n      }\n   ) => `\n       <div class=\"photo-card\">\n          <a class=\"gallery__link\" href=\"${largeImageURL}\">\n             <img class=\"images\" src=\"${webformatURL}\"\n              alt=\"${tags}\" loading=\"lazy\" />\n                <div class=\"info\">\n                   <p class=\"info-item\"><b>Likes</b> <br>${likes}</p>\n                   <p class=\"info-item\"><b>Views</b> <br>${views}</p>\n                   <p class=\"info-item\"><b>Comments</b> <br>${comments}</p>\n                   <p class=\"info-item\"><b>Downloads</b> <br>${downloads}</p>\n                </div>\n          </a>\n       </div>\n       `).join(\"\");\n   // refs.gallery.innerHTML = markupGel;\n   refs.gallery.insertAdjacentHTML('beforeend', markupGel);\n    // let lightbox = new SimpleLightbox('.gallery a');\n    // lightbox.refresh();\n}\n//////////////////////////////////////////////////////////////\nconst options = {\n  root: null,\n  rootMargin: \"200px\",\n//   threshold: 1.0,\n};\nconst observer =  new IntersectionObserver(loadMoreScrol, options);\nlet target = document.querySelector(\".js-guard\");\nobserver.observe(refs.guard);\n function loadMoreScrol (entries, observer) {\n  entries.forEach((entry) => {\n      if (entry.isIntersecting) {\n          page += 1;\n pixabay(inputDataUser, page)\n  .then((data) => {\n    // console.log(data.hits);\n    creatMarkup(data.hits);\n    if (data.page < data.total_pages) {\n      observer.observe(elements.guard);\n    }\n  })\n  .catch((err) => console.log(err));\n      }\n  });\n};\n\n//////////////////////////////////////\n\n\nconst goTopBtn = document.querySelector(\".go-top\");\n\nwindow.addEventListener(\"scroll\", trackScroll);\n\ngoTopBtn.addEventListener(\"click\", goTop);\n\nfunction trackScroll() {\n\n  const scrolled = window.pageYOffset;\n\n  const coords = document.documentElement.clientHeight;\n\n  if (scrolled > coords) {\n\n    goTopBtn.classList.add(\"go-top--show\");\n  } else {\n\n    goTopBtn.classList.remove(\"go-top--show\");\n  }\n}\n\nfunction goTop() {\n\n  if (window.pageYOffset > 0) {\n  \n    window.scrollBy(0, -25);\n    setTimeout(goTop, 0); \n  }\n}\n\n////////////////////////////////"],"names":["refs","searchQuery","inputDataUser","page","onSearchQuery","e","pixabay","data","creatMarkup","err","BASE_URL","params","resp","respArr","markupGel","webformatURL","largeImageURL","tags","likes","views","comments","downloads","options","observer","loadMoreScrol","entries","entry","goTopBtn","trackScroll","goTop","scrolled","coords"],"mappings":"AAAA,MAAMA,EAAO,CACT,KAAM,SAAS,cAAc,cAAc,EAC3C,UAAW,SAAS,cAAc,eAAe,EACjD,QAAS,SAAS,cAAc,UAAU,EAC1C,YAAa,SAAS,cAAc,YAAY,EAChD,cAAe,SAAS,cAAc,iBAAiB,EACvD,MAAO,SAAS,cAAc,WAAW,CAC7C,EAGM,CAAE,YAAAC,CAAa,EAAGD,EAAK,KAAK,SAClC,IAAIE,EAEAC,EAAO,EAEXH,EAAK,KAAK,iBAAiB,SAAUI,CAAa,EACjD,SAASA,EAAcC,EAAG,CAOzB,GANAA,EAAE,eAAc,EAChBL,EAAK,QAAQ,UAAY,GACzBA,EAAK,cAAc,UAAU,IAAI,QAAQ,EACzCA,EAAK,YAAY,UAAU,IAAI,QAAQ,EACvCE,EAAgBD,EAAY,MAAM,OAE9B,CAACC,EACH,OAAO,QAAQ,IAAI,iCAAiC,EAGtDI,EAAQJ,EAAeC,CAAI,EAC1B,KAAMI,GAAS,CACd,QAAQ,IAAIA,EAAK,IAAI,EACnBC,EAAYD,EAAK,IAAI,EACrBP,EAAK,MAAM,UAAU,OAAO,QAAQ,CAC1C,CAAG,EACM,MAAOS,GAAQ,QAAQ,IAAIA,CAAG,CAAC,CACxC,CAEA,eAAeH,EAAQJ,EAAeC,EAAM,CACxC,MAAMO,EAAW,2BACXC,EAAS,IAAI,gBAAgB,CAC/B,IAAK,qCACL,EAAGT,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,GACV,KAAAC,CACR,CAAK,EACD,OAAO,MAAM,MAAM,GAAGO,KAAYC,GAAQ,EACtC,KAAMC,GAAS,CACnB,GAAI,CAACA,EAAK,GACR,MAAM,IAAI,MAAMA,EAAK,UAAU,EAEjC,OAAOA,EAAK,MAChB,CAAG,CACH,CAEA,SAASJ,EAAYK,EAAS,CAC3B,MAAMC,EAAYD,EAAQ,IAAI,CAC3B,CACG,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,IACC;AAAA;AAAA,2CAEmCL;AAAA,wCACHD;AAAA,qBACnBE;AAAA;AAAA,2DAEsCC;AAAA,2DACAC;AAAA,8DACGC;AAAA,+DACCC;AAAA;AAAA;AAAA;AAAA,QAIvD,EAAE,KAAK,EAAE,EAEdrB,EAAK,QAAQ,mBAAmB,YAAac,CAAS,CAGzD,CAEA,MAAMQ,EAAU,CACd,KAAM,KACN,WAAY,OAEd,EACMC,EAAY,IAAI,qBAAqBC,EAAeF,CAAO,EACpD,SAAS,cAAc,WAAW,EAC/CC,EAAS,QAAQvB,EAAK,KAAK,EAC1B,SAASwB,EAAeC,EAASF,EAAU,CAC1CE,EAAQ,QAASC,GAAU,CACnBA,EAAM,iBACNvB,GAAQ,EACjBG,EAAQJ,EAAeC,CAAI,EACzB,KAAMI,GAAS,CAEdC,EAAYD,EAAK,IAAI,EACjBA,EAAK,KAAOA,EAAK,aACnBgB,EAAS,QAAQ,SAAS,KAAK,CAErC,CAAG,EACA,MAAOd,GAAQ,QAAQ,IAAIA,CAAG,CAAC,EAElC,CAAG,CACH,CAKA,MAAMkB,EAAW,SAAS,cAAc,SAAS,EAEjD,OAAO,iBAAiB,SAAUC,CAAW,EAE7CD,EAAS,iBAAiB,QAASE,CAAK,EAExC,SAASD,GAAc,CAErB,MAAME,EAAW,OAAO,YAElBC,EAAS,SAAS,gBAAgB,aAEpCD,EAAWC,EAEbJ,EAAS,UAAU,IAAI,cAAc,EAGrCA,EAAS,UAAU,OAAO,cAAc,CAE5C,CAEA,SAASE,GAAQ,CAEX,OAAO,YAAc,IAEvB,OAAO,SAAS,EAAG,GAAG,EACtB,WAAWA,EAAO,CAAC,EAEvB"}