{"version":3,"file":"page-3-2b00a38c.js","sources":["../../src/js/serviceMovie.js"],"sourcesContent":["// Створи фільмотеку з популярними фільмами, для цього використай\n// https://developer.themoviedb.org/reference/trending-movies\n\n// Щоб отримати постер фільму потрібно підставити url з відповіді від бекенду та url з документації\n// https://developer.themoviedb.org/docs/image-basics\n\n// Відмалюй картки з фільмами\n// Приклад картки  => https://prnt.sc/Hi_iLLg7Nd1F\n\n// Реалізуй пагінацію\n// 1 Кнопка \"Load More\"\n// 2 Infinity scroll (https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API)\n\n// *********** Кнопка \"Load More\" ***************** \\\\\n// const elements = {\n//   loadMore: document.querySelector(\".js-load-more\"),\n//   list: document.querySelector(\".js-movie-list\"),\n// };\n// let page = 498;\n\n// elements.loadMore.addEventListener(\"click\", handlerLoadMore);\n// serviceMovie(page)\n//   .then((data) => {\n//     elements.list.insertAdjacentHTML(\"beforeend\", createMarkup(data.results));\n\n//     if (data.page < data.total_pages) {\n//       elements.loadMore.classList.remove(\"load-more-hidden\");\n//     }\n//   })\n//   .catch((err) => console.log(err));\n\n// function handlerLoadMore() {\n//   page += 1;\n\n//   serviceMovie(page)\n//     .then((data) => {\n//       elements.list.insertAdjacentHTML(\n//         \"beforeend\",\n//         createMarkup(data.results)\n//       );\n\n//       if(data.page >= 500){\n//         elements.loadMore.classList.add(\"load-more-hidden\")\n//       }\n//     })\n//     .catch((err) => console.log(err));\n// }\n\n// function serviceMovie(page = 1) {\n//   const BASE_URL = \"https://api.themoviedb.org/3\";\n//   const END_POINT = \"/trending/movie/week\";\n//   const API_KEY = \"345007f9ab440e5b86cef51be6397df1\";\n//   const params = new URLSearchParams({\n//     api_key: API_KEY,\n//     page,\n//   });\n\n//   return fetch(`${BASE_URL}${END_POINT}?${params}`).then((resp) => {\n//     if (!resp.ok) {\n//       throw new Error(resp.statusText);\n//     }\n//     return resp.json();\n//   });\n// }\n\n// function createMarkup(arr) {\n//   return arr\n//     .map(\n//       ({ poster_path, original_title, release_date, vote_average }) => `\n//     <li class=\"movie-card\">\n//         <img src=\"https://image.tmdb.org/t/p/w300${poster_path}\" loading=\"lazy\" alt=\"${original_title}\">\n//         <div class=\"movie-info\">\n//         <h2>${original_title}</h2>\n//         <p>Release date: ${release_date}</p>\n//         <p>Vote Average: ${vote_average}</p>\n//         </div>\n//     </li>`\n//     )\n//     .join(\"\");\n// }\n// ********************************Infinity scroll ********************** \\\\\nconst elements = {\n  list: document.querySelector(\".js-movie-list\"),\n  guard: document.querySelector(\".js-guard\"),\n};\nconst options = {\n  root: null,\n  rootMargin: \"300px\",\n};\nconst observer = new IntersectionObserver(handlerLoadMore, options);\nlet page = 1;\n\nserviceMovie(page)\n  .then((data) => {\n    elements.list.insertAdjacentHTML(\"beforeend\", createMarkup(data.results));\n\n    if (data.page < data.total_pages) {\n      observer.observe(elements.guard);\n    }\n  })\n  .catch((err) => console.log(err));\n\nfunction serviceMovie(page = 1) {\n  const BASE_URL = \"https://api.themoviedb.org/3\";\n  const END_POINT = \"/trending/movie/week\";\n  const API_KEY = \"345007f9ab440e5b86cef51be6397df1\";\n  const params = new URLSearchParams({\n    api_key: API_KEY,\n    page,\n  });\n\n  return fetch(`${BASE_URL}${END_POINT}?${params}`).then((resp) => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n    return resp.json();\n  });\n}\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ poster_path, original_title, release_date, vote_average }) => `\n      <li class=\"movie-card\">\n          <img src=\"https://image.tmdb.org/t/p/w300${poster_path}\" loading=\"lazy\" alt=\"${original_title}\">\n          <div class=\"movie-info\">\n          <h2>${original_title}</h2>\n          <p>Release date: ${release_date}</p>\n          <p>Vote Average: ${vote_average}</p>\n          </div>\n      </li>`\n    )\n    .join(\"\");\n}\n\nlet counterObserver = 0;\nfunction handlerLoadMore(entries, observer) {\n  counterObserver += 1;\n  console.log(\"counterObserver\", counterObserver);\n  entries.forEach((entry) => {\n    if (entry.isIntersecting) {\n      page += 1;\n      serviceMovie(page)\n        .then((data) => {\n          elements.list.insertAdjacentHTML(\n            \"beforeend\",\n            createMarkup(data.results)\n          );\n\n          if (data.page >= 500) {\n            observer.unobserve(elements.guard);\n          }\n        })\n        .catch((err) => console.log(err));\n    }\n  });\n}\n\n// document.addEventListener(\"scroll\", handlerScroll);\n\n// let counterScroll = 0;\n// function handlerScroll() {\n//   counterScroll += 1;\n//   console.log(\"counterScroll\", counterScroll);\n// }"],"names":["elements","options","observer","handlerLoadMore","page","serviceMovie","data","createMarkup","err","BASE_URL","END_POINT","API_KEY","params","resp","arr","poster_path","original_title","release_date","vote_average","counterObserver","entries","entry"],"mappings":"6BAiFA,MAAMA,EAAW,CACf,KAAM,SAAS,cAAc,gBAAgB,EAC7C,MAAO,SAAS,cAAc,WAAW,CAC3C,EACMC,EAAU,CACd,KAAM,KACN,WAAY,OACd,EACMC,EAAW,IAAI,qBAAqBC,EAAiBF,CAAO,EAClE,IAAIG,EAAO,EAEXC,EAAaD,CAAI,EACd,KAAME,GAAS,CACdN,EAAS,KAAK,mBAAmB,YAAaO,EAAaD,EAAK,OAAO,CAAC,EAEpEA,EAAK,KAAOA,EAAK,aACnBJ,EAAS,QAAQF,EAAS,KAAK,CAErC,CAAG,EACA,MAAOQ,GAAQ,QAAQ,IAAIA,CAAG,CAAC,EAElC,SAASH,EAAaD,EAAO,EAAG,CAC9B,MAAMK,EAAW,+BACXC,EAAY,uBACZC,EAAU,mCACVC,EAAS,IAAI,gBAAgB,CACjC,QAASD,EACT,KAAAP,CACJ,CAAG,EAED,OAAO,MAAM,GAAGK,IAAWC,KAAaE,GAAQ,EAAE,KAAMC,GAAS,CAC/D,GAAI,CAACA,EAAK,GACR,MAAM,IAAI,MAAMA,EAAK,UAAU,EAEjC,OAAOA,EAAK,MAChB,CAAG,CACH,CAEA,SAASN,EAAaO,EAAK,CACzB,OAAOA,EACJ,IACC,CAAC,CAAE,YAAAC,EAAa,eAAAC,EAAgB,aAAAC,EAAc,aAAAC,CAAc,IAAK;AAAA;AAAA,qDAElBH,0BAAoCC;AAAA;AAAA,gBAEzEA;AAAA,6BACaC;AAAA,6BACAC;AAAA;AAAA,YAGxB,EACA,KAAK,EAAE,CACZ,CAEA,IAAIC,EAAkB,EACtB,SAAShB,EAAgBiB,EAASlB,EAAU,CAC1CiB,GAAmB,EACnB,QAAQ,IAAI,kBAAmBA,CAAe,EAC9CC,EAAQ,QAASC,GAAU,CACrBA,EAAM,iBACRjB,GAAQ,EACRC,EAAaD,CAAI,EACd,KAAME,GAAS,CACdN,EAAS,KAAK,mBACZ,YACAO,EAAaD,EAAK,OAAO,CACrC,EAEcA,EAAK,MAAQ,KACfJ,EAAS,UAAUF,EAAS,KAAK,CAE7C,CAAS,EACA,MAAOQ,GAAQ,QAAQ,IAAIA,CAAG,CAAC,EAExC,CAAG,CACH"}