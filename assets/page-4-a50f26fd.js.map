{"version":3,"file":"page-4-a50f26fd.js","sources":["../../src/js/page-4.js"],"sourcesContent":["const refs = {\n    catList: document.querySelector('.categoriesList'),\n    catListItem: document.querySelector('.categoriesList'),\n    catPage: document.querySelector('.categoryPage'),\n    bookPage: document.querySelector('.bookInfoBox'),\n    bestSellersPartName: document.querySelector('.bestSellersPartName'),\n    partCardsPage: document.querySelector('.partCardsList'),\n    btnSeeMore: document.querySelector('.btnBestSellersSeeMore'),\n    cardsBookSmall: document.querySelector('.photo-card'),\n    shoppingList: document.querySelector('.shoppingList'),\n    btnAddtoShList: document.querySelector('.btnAddtoCard'),\n    btnRemoveShList: document.querySelector('.btnRemoveCard'),\n    btnCloseInfoBook: document.querySelector('.btnCloseInfoBook'),\n};\nconst numberBlocksPage = 4;\n//////////////////////////////////////////////////////////////\n\n// ---->>>>>>   Перелік категорій книг  <<<<<<-----//\nasync function catigoriesList() {\n    const BASE_URL = 'https://books-backend.p.goit.global/books/category-list';\n    return await fetch(`${BASE_URL}`)\n       .then((resp) => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n    return resp.json();\n  });\n}\n\nconst listCat = catigoriesList()\n  .then((data) => {\n    //   console.log(data);\n      creatCatigoriesList(data);\n  })\n        .catch((err) => console.log(err));\n\n//////////////////////////////////////////////////////////////\nfunction creatCatigoriesList(respArr) {\n   const catigoriesList = respArr.map(({list_name}\n   ) => `\n       <li class=\"categoryItem\">${list_name}</li>\n       `).join(\"\");\n   refs.catList.innerHTML = catigoriesList;\n//    refs.gallery.insertAdjacentHTML('beforeend', markupGel);\n}\nlet selectedCategory;\nrefs.catListItem.addEventListener('click', onCategoriesSwitch);\n// const selectedCategory = onCategoriesSwitch (e) =>\n\nfunction onCategoriesSwitch(e) {    \n    selectedCategory = e.target.textContent;\n    // console.log(e.target.textContent);\n    booksSelectedCategory(selectedCategory);\n    \n\n}\n\n// ---->>>>>>   Книги окремої категорії <<<<<<-----//\n// https://books-backend.p.goit.global/books/category?category=selectedCategory?category=Audio+Fiction\nasync function booksSelectedCategory(selectedCategory) {\n    const BASE_URL = 'https://books-backend.p.goit.global/books/category';\n    const params = new URLSearchParams({\n         category: selectedCategory\n    });\n    return await fetch(`${BASE_URL}?${params}`)\n       .then((resp) => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n           }\n    return resp.json();\n       })\n      .then((data) => {\n    //   console.log(data);\n      creatMarkUP(data)\n  })\n        .catch((err) => console.log(err));\n\n}\n\nfunction creatMarkUP(respArr) {\n    const pageMarkUp = respArr.map(({\n        author,\n        book_image,\n        description,\n        amazon_product_url,\n        title,\n        list_name,\n        _id,\n    }\n   ) => `\n       <div class=\"photo-card\" id=\"${_id}\">\n             <img class=\"images\" src=\"${book_image}\"\n              alt=\"${title}\" loading=\"lazy\" />\n                <div class=\"info\">\n                   <p class=\"info-item\"><b>${title}</b></p>                \n                   <p class=\"info-item\"><b>${author}</b></p>\n                </div>\n       </div>\n       `).join(\"\");\n    \n     const headPage = `<h1>${selectedCategory}</h1>`;\n//    refs.catPage.innerHTML = pageMarkUp;\n    // refs.catPage.insertAdjacentHTML('beforeend', pageMarkUp);\n    refs.catPage.innerHTML = headPage + pageMarkUp;\n}\n\n\n// ---->>>>>>   Детальна інформація про книгу  <<<<<<-----//??????????????????????????????\nasync function bookDetail(bookId) {\n    return await fetch(`https://books-backend.p.goit.global/books/${bookId}`)\n       .then((resp) => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n           }\n          return resp.json();\n       })\n        .then((resp) => {  \n              \n    // console.log([resp]);\n    creatMarkupBook([resp])\n  })\n        .catch((err) => console.log(err));\n}\n\n\nfunction creatMarkupBook(respArr) {\n\nconst infoBuyLinks = respArr[0].buy_links.map(({name, url }) =>\n     `\n     <div class=\"boxMarketPlace\">\n     <a href=\"${url}\" class=\"infoMarketPlace\" target=\"_blank\"><b>${name}</b></a>\n     </div>\n       `).join(\"\");\n\n    const pageMarkupBook = respArr.map(({\n        author,\n        book_image,\n        description,\n        buy_links: [{ name, url }],\n        buy_links,\n        title,\n        list_name,\n        _id,\n    }\n   ) => `\n       <div class=\"photo-card\" id=\"${_id}\">\n       <button class=\"btnCloseInfoBook\">X</button>\n             <img class=\"images\" src=\"${book_image}\"\n              alt=\"${title}\" loading=\"lazy\" />\n                <div class=\"info\">\n                   <p class=\"info-title\"><b>${title}</b></p>\n                   <p class=\"info-author\"><b>${author}</b></p>\n                   <p class=\"info-buy_links\"><b>${infoBuyLinks}</b></p>\n                   <p class=\"info-description\">${description}</p>\n                   <button class=\"btnAddtoCard\">Add to shopping list</button>\n                   <button class=\"btnRemoveCard hidden\">Remove from the shopping list</button>\n                </div>\n       </div>\n       `).join(\"\");\n    refs.bookPage.classList.remove('hidden');\n    refs.bookPage.innerHTML = pageMarkupBook;\n//    refs.bookPage.insertAdjacentHTML('beforeend', pageMarkupBook);\n}\n//////////////////////////////////////////////////////////////\n// ---->>>>>>   Популярні книги, що належать до усіх категорій  <<<<<<-----// \n// async function allBooksBackend() {\n//     const BASE_URL = 'https://books-backend.p.goit.global/books/top-books';\n//     return await fetch(`${BASE_URL}`)\n//        .then((resp) => {\n//     if (!resp.ok) {\n//       throw new Error(resp.statusText);\n//     }\n//     return resp.json();\n//   });\n// }\n\n// await allBooksBackend()\n//     .then((data) => {\n//     //   console.log(data);\n//     //    createPageAllBooks(data);\n//   })\n//         .catch((err) => console.log(err));\n\nfunction createPageAllBooks(respArr) {\n    const headPage = `<h1 class=\"mainHeadPage\">Best Sellers Books</h1>`;\n    let partBoxAllBooks = '';\n    let pageAllBooks = '';\n\n    for (let i = 0; i < numberBlocksPage; i++) {\n    let categoryName = respArr[i].list_name;\n    let categoryArr = respArr[i].books;\n    // console.log(categoryArr);\n    \n    const pageMarkupAllBooks = categoryArr.map(({ _id,\n        author,\n        book_image,\n        title,}\n   ) => `\n      <div class=\"partCardsListItem photo-card\" id=\"${_id}\" >\n         <img class=\"imgBestSellersItem\" src=\"${book_image}\" alt=\"${title}\">\n         <p class=\"nameBestSellersItem\">${_id}</p>\n         <p class=\"nameBestSellersItem\">${title}</p>\n         <p class=\"authorBestSellersItem\">${author}</p>\n      </div>\n       `).join(\"\");\n    \n      partBoxAllBooks =\n      ` <div class=\"bestSellersPart\">\n              <p class=\"bestSellersPartName\">${categoryName}</p>\n                 <div class=\"bestSellersPartCards\">\n                   <div class=\"partCardsList\">\n                   ${pageMarkupAllBooks}\n                   </div>\n                 </div>\n          </div>\n          <button class=\"btnBestSellersSeeMore\" category = \"${categoryName}\">See More</button>\n      `\n        pageAllBooks += partBoxAllBooks;\n    }\n    // refs.catPage.insertAdjacentHTML('beforeend', headPage + pageAllBooks);\n    refs.catPage.innerHTML = headPage + pageAllBooks;\n}\n\n// На стр. BestSellers вікриваемо інфо про книгу або відрацьовуемо клік по кнопці SeeMore\nrefs.catPage.addEventListener('click', onBookSwitch);\n\nfunction onBookSwitch(e) {\n    const currentBook = e.target.closest(\".photo-card\")\n    const currentCategory = e.target.closest(\".btnBestSellersSeeMore\")\n\n    if (currentBook) {\n        let bookId = currentBook.id;\n        bookDetail(bookId);\n    } if (currentCategory) {\n        let bookCat = currentCategory.getAttribute(\"category\");\n        selectedCategory = bookCat;\n        booksSelectedCategory(selectedCategory);\n        // console.log(bookCat);\n     }return\n};\n//////////////////////////////////////////////////////////////\n// localStorage \n// const STORAGE_KEY = 'feedback-form-state';\n// const btnAdd = document.getElementsByClassName('btnAddtoCard');\n// const btnDel = document.getElementsByClassName('btnRemoveCard');\n//  btnAdd.addEventListener('click', onRemShList);\n// function onRemShList() {\n//         btnDel.classList.remove('hidden');\n//     // console.log(refs.btnRemoveShList);\n//     };\n\n\n\nrefs.bookPage.addEventListener('click', onClickBookInfo);\nfunction onClickBookInfo(e) { \n   \n\n\n\n\n\n    \n    const btnAddtoCard = e.target.closest(\".btnAddtoCard\")\n    const btnRemoveCard = e.target.closest(\".btnRemoveCard\")\n    const btnCloseBookPage = e.target.closest(\".btnCloseInfoBook\")\n    if (btnAddtoCard) {\n        console.log('btnAddtoCard');\n        console.log(refs.btnRemoveShList);\n        // refs.btnRemoveShList.classList.remove('hidden');\n        //  refs.btnAddtoCard.classList.add('hidden')\n\n    } if (btnRemoveCard) {\n        // refs.btnAddtoCard.classList.remove('hidden')\n        // refs.btnRemoveCard.classList.add('hidden')\n    console.log('btnRemoveCard');\n    } if (btnCloseBookPage) {\n       refs.bookPage.classList.add('hidden');\n     }return\n\n\n\n\n};"],"names":["refs","catigoriesList","resp","data","creatCatigoriesList","err","respArr","list_name","selectedCategory","onCategoriesSwitch","e","booksSelectedCategory","BASE_URL","params","creatMarkUP","pageMarkUp","author","book_image","description","amazon_product_url","title","_id","headPage","bookDetail","bookId","creatMarkupBook","infoBuyLinks","name","url","pageMarkupBook","buy_links","onBookSwitch","currentBook","currentCategory","onClickBookInfo","btnAddtoCard","btnRemoveCard","btnCloseBookPage"],"mappings":"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"}